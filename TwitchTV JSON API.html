
<head>
	<title>TwitchTV JSON API</title>
	<meta charset="utf-8">
	<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.2.1.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	
</head>


<script>
// To access 3rd API (cross domain access), we can use CORS or JSONP. Recomendation: webserver should support these function first
// IE support: https://cypressnorth.com/programming/cross-domain-ajax-request-with-json-response-for-iefirefoxchrome-safari-jquery/
	
	// List of channel
	var channels = ['ESL_SC2', 'freecodecamp', 'OgamingSC2'];
	
	// Make stream API URL
	function makeURL(channel) {
		return 'https://wind-bow.gomix.me/twitch-api/streams/' + channel + '?callback=?';
	}
	
	// Get data from TwitchTV
	function getTwitchData (streamApi, i) {
		$.getJSON(streamApi, function (data) {
			console.log(data);
			if (data.stream != null) {
				$('#channel' + i + 'Status').html('<h3 style=\'color:green\'>Online</h3>');
				// Click on div for more details
			}
			else if (data.stream == 'undefine'){
				$('#channel' + i + 'Status').html('<h3>Channel is deactivated</h3>');
			}
			else {
				$('#channel' + i + 'Status').html('<h3 style=\'color:red\'>Offline</h3>');
			}
		});
	}
	
	$(document).ready(function() {
		// Get all status of stream
		for (var i=0; i <channels.length; i++) {
			getTwitchData(makeURL(channels[i]),i);
		}
		
		
	});
</script>

<style>
	#header {
		background-color: #007ec3;
		color: white;
	}
	
</style>	
	
<body>
	<!-- Header -->
	<div class="container-fluid text-center" id="header">
		<br>
		<h1>TwitchTV Stream App</h1>
		<p>A Homework From <a href="https://www.freecodecamp.com" target="_blank" style="color:white">FreeCodeCamp.com</a></p>
	</div>
	</br>
	
	<!-- Display Stream Info-->	
	<div class="container" id="mainForm">
		<!-- Status button -->
		<div class="btn-group btn-group-justified">
			<a href="#" class="btn btn-info" style="color:black">ALL</a>
			<a href="#" class="btn btn-success" style="color:black">ONLINE</a>
			<a href="#" class="btn btn-danger" style="color:black">OFFLINE</a>
		</div>
		</br>
		</br>
		
		<!-- Result -->
		<div  id="result">
			<h2 id='resultText'>All Channel:</h2>
			<div class="container well row" id="channel0">
				<div class="col-xs-2">
					<img class='img-circle' width="64" height="64" src='https://static-cdn.jtvnw.net/jtv_user_pictures/esl_sc2-profile_image-d6db9488cec97125-300x300.jpeg'>
				</div>
				<div class='col-xs-4'>
					<h3><a href="https://www.twitch.tv/ESL_SC2" target='_blank'>ESL_SC2 Channel</a></h3>
				</div>
				<div class='col-xs-2 col-xs-offset-3' id='channel0Status'><h3></h3></div>
			</div>
			
			<div class="container well row" id="channel3">
				<div class="col-xs-2">
					<img class='img-circle' width="64" height="64" src='https://static-cdn.jtvnw.net/jtv_user_pictures/freecodecamp-profile_image-d9514f2df0962329-300x300.png'>
				</div>
				<div class='col-xs-4'>
					<h3><a href="https://www.twitch.tv/freecodecamp" target='_blank'>Freecodecamp Channel</a></h3>
				</div>
				<div class='col-xs-2 col-xs-offset-3' id='channel1Status'></div>
			</div>
			
			<div class="container well row" id="channel3">
				<div class="col-xs-2">
					<img class='img-circle' width="64" height="64" src='https://static-cdn.jtvnw.net/jtv_user_pictures/ogamingsc2-profile_image-9021dccf9399929e-300x300.jpeg'>
				</div>
				<div class='col-xs-4'>
					<h3><a href="https://www.twitch.tv/OgamingSC2" target='_blank'>OgamingSC2 Channel</a></h3>
				</div>
				<div class='col-xs-2 col-xs-offset-3' id='channel2Status'></div>
			</div>
		</div>
	</div>
</body>